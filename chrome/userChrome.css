@import "neptune/colors/light.css";
@import "neptune/colors/dark.css";

:root {
	--theme-browser-toolbox-padding: 12px;	/*This value will affect the height of the toolbar.*/
	--toolbar-start-end-padding: 10px !important;
	--space-xsmall: 0.25rem !important;
	--urlbar-min-height: 28px !important;
	--urlbarView-small-font-size: 0.84em !important;
	--urlbarView-labeled-row-label-top: calc(-1.2em - 6px) !important;
	--tab-min-height: var(--urlbar-min-height) !important;
	--tabstrip-min-height: var(--tab-min-height) !important;
	--tab-group-label-height: var(--tab-min-height) !important;
	--tab-label-line-height: 1.6 !important;
	--tab-shadow-max-size: 0 !important;
	--button-min-height: calc(var(--size-item-small) + var(--toolbarbutton-inner-padding)) !important;
	--button-padding: 0 var(--space-large) !important;
	--border-radius-small: 6px !important;
	--border-radius-xsmall: 4px;
	--border-radius-large: 12px;
	--menu-panel-width-wide: 28em !important;
	--uei-icon-size: var(--panel-and-palette-icon-size) !important;
	--panel-separator-zap-gradient: none !important;
	--panel-subview-body-padding-block: 5px !important;
	--panel-separator-margin-vertical: 5px !important;
	--panel-separator-margin-horizontal: 9px !important;
	--panel-separator-margin: var(--panel-separator-margin-vertical) var(--panel-separator-margin-horizontal) !important;
	--arrowpanel-menuitem-margin-inline: 5px !important;
	--arrowpanel-menuitem-padding-inline: 9px !important;
	--arrowpanel-menuitem-padding-block: 0 !important;
	--arrowpanel-padding: calc(var(--arrowpanel-menuitem-margin-inline) + var(--arrowpanel-menuitem-padding-inline)) !important;
	--default-focusring: none !important;
	--tabpanel-background-color: transparent !important;
	--in-content-page-background: var(--neptune-main-background) !important;
	--in-content-box-background: var(--neptune-input-bgcolor) !important;
	--in-content-box-border-color: var(--neptune-toolbar-border-color) !important;
	--in-content-primary-button-text-color: white !important;
	--in-content-button-background: var(--neptune-item-background) !important;
	--in-content-button-background-hover: var(--neptune-item-hover-background) !important;
	--in-content-button-background-active: var(--neptune-item-active-background) !important;
	--in-content-primary-button-background: var(--theme-primary-color) !important;
	--in-content-primary-button-background-hover: var(--theme-primary-hover-color) !important;
	--in-content-primary-button-background-active: var(--theme-primary-active-color) !important;
	--color-accent-primary: var(--theme-primary-color) !important;
	--color-accent-primary-hover: var(--theme-primary-hover-color) !important;
	--color-accent-primary-active: var(--theme-primary-active-color) !important;
	--toolbarbutton-hover-background: var(--neptune-item-hover-background) !important;
	--toolbarbutton-active-background: var(--neptune-item-active-background) !important;
	--toolbarbutton-inner-padding: calc((var(--urlbar-min-height) - var(--size-item-small)) / 2) !important;
	--toolbarbutton-icon-fill: color-mix(in srgb, currentColor 70%, transparent) !important;
	--button-background-color: var(--neptune-item-background) !important;
	--button-background-color-hover: var(--neptune-item-hover-background) !important;
	--button-background-color-active: var(--neptune-item-active-background) !important;
	--button-text-color-primary: white !important;
	--button-background-color-primary: var(--theme-primary-color) !important;
	--button-background-color-primary-hover: var(--theme-primary-hover-color) !important;
	--button-background-color-primary-active: var(--theme-primary-active-color) !important;
	--link-color: light-dark(#909090, #7c7c7c) !important;
	--icon-color: light-dark(#383838, #ececec) !important;
	--tab-loading-fill: var(--theme-primary-color) !important;
	--tab-hover-background-color: var(--neptune-item-hover-background) !important;
	--tab-selected-bgcolor:  var(--neptune-item-active-background) !important;
	--download-progress-fill-color: var(--theme-primary-color) !important;
	--toolbarbutton-icon-fill-attention: var(--theme-primary-color) !important;
	--toolbar-field-focus-background-color: var(--neptune-item-active-background) !important;
	--sidebar-background-color: transparent !important;
	--sidebar-border-color: var(--neptune-content-border-color) !important;
	--urlbar-box-bgcolor: transparent !important;
	--urlbar-box-focus-bgcolor: transparent !important;
	--urlbarView-action-button-background-color: var(--neptune-urlbarView-button-background) !important;
	--urlbarView-hover-background: var(--neptune-urlbarView-hover-background) !important;
	--urlbarView-highlight-background: var(--neptune-focused-urlbar-highlight-color) !important;
	--urlbarView-highlight-color: #fff !important;
	--input-bgcolor: var(--neptune-input-bgcolor) !important;
	--background-color-box: var(--input-bgcolor) !important;
	--focus-outline-color: var(--theme-primary-color) !important;
	--arrowpanel-shadow-margin: 22px !important;
	--arrowpanel-color: FieldText !important;
	--arrowpanel-background: var(--neptune-menu-background) !important;
	--organizer-toolbar-background: var(--neptune-content-background) !important;
	--organizer-hover-background: var(--neptune-item-hover-background) !important;
	--organizer-selected-background: var(--neptune-item-active-background) !important;
	--organizer-pane-background: var(--neptune-main-background) !important;
	--organizer-content-background: var(--neptune-content-background) !important;
	--organizer-hover-background: var(--neptune-item-hover-background) !important;
}

/*---------- Toolbox ----------*/
:root#main-window {
	min-width: 650px !important;
}

#browser:not(.browser-toolbox-background) {
	background-color: transparent !important;
}

#navigator-toolbox {
	display: grid;
	grid-template-columns: minmax(auto, 0) auto;
	background-color: var(--neptune-toolbar-background) !important;
	border: none !important;

	&.fullscreen-with-menubar {
		box-shadow: none !important;
	}

	> *:not(#nav-bar, #TabsToolbar) {
		grid-column: 1 / span 2;
	}

	#nav-bar {
		grid-area: 1 / 1 / span 1 / span 1;
		width: fit-content;
		background-color: transparent !important;
		padding: var(--theme-browser-toolbox-padding) 0 var(--theme-browser-toolbox-padding) calc(92px - var(--toolbar-start-end-padding) / 2) !important;
		border: none !important;

		:root[inFullscreen] & {
			padding-inline-start: var(--toolbar-start-end-padding) !important;
		}

		@media -moz-pref("sidebar.verticalTabs") {
			grid-column: 1 / span 2;
			width: auto;
		}

		> .customization-target:not(#widget-overflow-fixed-list) {
			:root[customizing] & {
				animation: emeTeachingMoment 1s linear infinite;
			}

			> toolbarpaletteitem[place=toolbar][id^=wrapper-customizableui-special-spring], toolbarspring {
				max-width: 100% !important;

				#nav-bar & {
					flex-grow: 400 !important;
				}

				/* Remove flexible spacers in the horizontal layout. */
				@media not -moz-pref("sidebar.verticalTabs") {
					display: none;
				}
			}

			 > toolbarpaletteitem[place="toolbar"] > toolbarspring {
				margin-block: 0 !important;
			}

			#stop-reload-button[animate] .toolbarbutton-animatable-box > .toolbarbutton-animatable-image {
				animation-duration: 0s !important;
			}
		}
	}

	.browser-titlebar {
		align-self: center;
		will-change: unset !important;
	}

	#TabsToolbar {
		grid-area: 1 / 2 / span 1 / span 1;
		padding: var(--theme-browser-toolbox-padding) calc(3 * var(--tab-min-height) + 4 * var(--toolbar-start-end-padding) + var(--toolbarbutton-outer-padding) - var(--toolbar-start-end-padding) / 2) var(--theme-browser-toolbox-padding) 0 !important;

		:root[customizing] & {
			padding-inline-end: calc(2 * var(--tab-min-height) + 3 * var(--toolbar-start-end-padding)) !important;
		}

		@media -moz-pref("sidebar.verticalTabs") {
			display: contents;
		}
	}

	#PersonalToolbar {
		--toolbarbutton-inner-padding: var(--toolbarbutton-outer-padding) !important;
		background-color: transparent !important;

		&[customizing] {
			outline: none !important;
		}

		.toolbarbutton-1 {
			margin: auto auto var(--space-small) !important;

			> .toolbarbutton-icon {
				height: var(--size-item-small) !important;
				border-radius: var(--toolbarbutton-border-radius) !important;
			}
		}

		toolbarbutton.bookmark-item:not(.subviewbutton) {
			padding-block: 0 !important;
			margin-block: auto var(--space-small) !important;

			&[container] {
				list-style-image: url("neptune/icons/folder.svg") !important;
			}
		}
	}

	.browser-toolbar {
		background-color: transparent !important;

		.notificationbox-stack {
			background: none !important;

			.infobar {
				--icon-size-default: 12px !important;
				--button-size-icon-small: 20px !important;
				--button-min-height-small: 20px !important;
				--message-bar-container-min-height: 28px !important;
				background-color: var(--neptune-item-active-background) !important;
				border: none !important;
				box-shadow: none !important;

				&::before {
					background-image: none !important;
				}
			}
		}
	}
}

#customization-container {
	background-image: none !important;
	background-color: var(--toolbox-bgcolor) !important;

	#customization-panelWrapper {
		--panel-arrow-offset: 0 !important;

		> .panel-arrowcontent {
			border-radius: var(--arrowpanel-border-radius) !important;
			box-shadow: var(--neptune-menu-shadow) !important;
		}
	}
}

.browserContainer {
	transition: padding 150ms ease-in-out;

	> findbar {
		position: absolute;
		inset-block-start: 0;
		min-width: 100% !important;
		background-color: transparent !important;
		border: none !important;
		padding-block: 0 !important;
		transition: opacity 150ms ease-in-out, margin-top 150ms ease-in-out, visibility 0s linear !important;

		&:where([hidden]) {
			margin-top: calc(-1 * var(--theme-browser-toolbox-padding)) !important;
			opacity: 0;
			transition-delay: 0s, 0s, 150ms !important;
		}

		.browserContainer:has(&:not([hidden])) {
			padding-top: var(--size-item-medium);
		}

		> .findbar-container {
			margin: 0 !important;
			justify-content: flex-end;

			.findbar-textbox {
				width: 12em !important;
				padding: 0 var(--space-xsmall) !important;
				background-color: transparent !important;
				border-color: var(--border-color-deemphasized) !important;
			}

			:is(.findbar-find-next, .findbar-find-previous) {
				padding: 0 2px !important;
				border: 1px solid var(--border-color-deemphasized);
			}

			.findbar-find-next {
				list-style-image: url("neptune/icons/arrow-right.svg") !important;
				margin-left: -1px !important;
				border-radius: 0 var(--border-radius-xsmall) var(--border-radius-xsmall) 0 !important;
				border-left: none;
			}

			.findbar-find-previous {
				list-style-image: url("neptune/icons/arrow-left.svg") !important;
				border-radius: var(--border-radius-xsmall) 0 0 var(--border-radius-xsmall) !important;
			}

			> :is(.findbar-find-status, .found-matches) {
				order: -1;
				margin-inline: var(--space-small) !important;
			}
		}

		> .findbar-closebutton {
			width: 42px !important;
			padding: 0 !important;
			margin-block: auto !important;
			list-style-image: url("neptune/icons/done.svg") !important;
			border: 1px solid var(--border-color-deemphasized);

			@media (-moz-platform: macos) {
				order: 1;
			}
		}
	}
}

/*---------- Search box ----------*/
search-textbox {
	appearance: none !important;
	padding-block: 0 !important;
	background-color: var(--neptune-input-bgcolor) !important;
	border-radius: var(--border-radius-xsmall);
}

#urlbar-background,
#searchbar,
.findbar-textbox,
search-textbox,
input:where([type="search"], [type="text"], [type="url"]):not(.searchbar-textbox),
textarea {
	outline: 16px solid transparent !important;
}

#urlbar[open] > #urlbar-background,
#searchbar:focus-within,
.findbar-textbox:focus,
search-textbox[focused],
input:where([type="search"], [type="text"], [type="url"]):not(.searchbar-textbox):focus-visible,
textarea:focus-visible {
	outline: 4px solid var(--neptune-input-outline-color) !important;
	outline-offset: var(--toolbarbutton-outline-offset);
	transition: all .2s cubic-bezier(0.33, 0, 0.67, 1);
}

select:where(:not([size], [multiple])),
input:where(:not([type=radio i], [type=checkbox i], [type=range i], .urlbar-input, .findbar-textbox)),
textarea:not(#select-translations-panel-text-area) {
	min-height: var(--button-min-height) !important;
	border: none !important;
	border-radius: var(--border-radius-xsmall) !important;
	padding-block: 0 !important;
	font: menu !important;
}

.textbox-search-icon,
.textbox-search-sign,
.textbox-search-clear {
	width: 12px !important;
	margin-inline: var(--space-xsmall) !important;
	transform: scaleX(-1);
}

*::selection {
	background-color: var(--neptune-item-selection-background) !important;
	color: var(--lwt-text-color) !important;
}

/*---------- Urlbar ----------*/
#urlbar-container,
#search-container {
	padding: 0 !important;
}

#searchbar,
#urlbar-background {
	background-color: var(--neptune-urlbar-background) !important;
	border: none !important;
	border-radius: var(--border-radius-small) !important;
	box-shadow: none !important;
	transition: background-color .2s ease;

	@media -moz-pref("sidebar.verticalTabs") {
		background-color: var(--neptune-urlbar-background-color) !important;
	}
}

#urlbar {
	height: var(--urlbar-height) !important;
	width: var(--urlbar-width) !important;
	margin: 0 !important;
	font-size: 12.5px !important;
	transition: opacity var(--inactive-window-transition);

	&:-moz-window-inactive {
		opacity: var(--inactive-titlebar-opacity);
	}

	> #urlbar-background {
		transition: background-color 0.2s ease;

		#urlbar:hover > & {
			background-color: var(--neptune-urlbar-hover-background) !important;
		}

		#urlbar:is([focused], [open]) > & {
			background-color: var(--neptune-urlbar-focused-background) !important;
		}

		@media -moz-pref("sidebar.verticalTabs") {
			#urlbar:hover > & {
				background-color: var(--neptune-urlbar-background-color) !important;
			}

			#urlbar:is([focused], [open]) > & {
				background-color: var(--neptune-verticaltab-background) !important;
			}

			&:not(#urlbar[open] > &):not(:has([pageproxystate="invalid"]) > &) {
				background: none !important;
				border: 1px solid var(--neptune-toolbar-border-color) !important;
			}
		}
	}

	> .urlbar-input-container {
		padding: 0 !important;
		border: none !important;
		border-radius: var(--border-radius-small) !important;

		@media -moz-pref("sidebar.verticalTabs") {
			> .urlbar-input-box > .urlbar-input {
				text-align: center !important;

				#urlbar:is([focused], [open]) & {
					text-align: revert !important;
				}
			}
		}

		> #urlbar-search-mode-indicator {
			margin-inline: 0 !important;
			padding-inline: var(--urlbar-icon-padding) !important;
			font-size: var(--urlbarView-small-font-size);
		}

		> #urlbar-searchmode-switcher {
			margin-inline: 0 !important;

			&[open] {
				background-color: var(--neptune-item-active-background) !important;
			}
		}

		> #searchmode-switcher-chicklet {
			margin-inline: 0 !important;
			font-size: var(--urlbarView-small-font-size);

			> #searchmode-switcher-close {
				margin-inline: var(--urlbar-icon-padding) !important;
			}
		}
	}
}

.urlbarView {
	color-scheme: light dark;
	width: calc(100% + 16px) !important;
	margin: 5px 0 0 -8px !important;
	border: none !important;
	border-radius: calc(var(--border-radius-medium) + 2px);
	background-color: var(--arrowpanel-background);
	color: MenuText;
	box-shadow: var(--neptune-small-shadow), var(--neptune-menu-shadow) !important;

	> .urlbarView-body-outer > .urlbarView-body-inner {
		width: inherit !important;
		margin-inline: 0 !important;
		border: none !important;
	}
}

.urlbarView-results {
	padding: var(--urlbarView-item-block-padding) !important;

	> .urlbarView-row {
		border: var(--button-border) !important;
		border-radius: calc(var(--border-radius-small) - 1px) !important;

		> .urlbarView-row-inner {
			flex-wrap: nowrap !important;
			align-items: center !important;
			padding: 8px !important;

			> .urlbarView-no-wrap {
				flex-basis: revert !important;
			}

			.urlbarView-title {
				line-height: 1.28 !important;
			}

			:is(.urlbarView-overflowable, .urlbarView-url)[overflow] {
				mask-image: none !important;
				text-overflow: ellipsis;
			}

			> .urlbarView-action-btn {
				padding-block: var(--urlbarView-row-gutter) !important;
				border: none !important;
				outline: none !important;
				color: var(--button-text-color-primary);
			}
		}

		&[has-url]:not([type$=tab]) > .urlbarView-row-inner > .urlbarView-no-wrap {
			max-width: calc(70% - 2 * (var(--urlbarView-favicon-width) + (6px + 2px))) !important;
		}

		&[has-url] > .urlbarView-row-inner > .urlbarView-url {
			margin-inline: revert !important;
			line-height: 1.333 !important;
		}

		&[has-url]:not([type$=tab], [sponsored], [restyled-search]) .urlbarView-title-separator {
			display: revert !important;
		}

		&[row-selectable]:not([selected]):hover {
			color: var(--urlbarView-highlight-color);

			.urlbarView-url {
				color: inherit !important;
			}
		}

		&:not([type=tip], [type=dynamic]) {
			:root:not([uidensity=compact]) & {
				min-height: var(--button-min-height) !important;
			}
		}

		&[type=tip] {
			padding-block: var(--urlbarView-item-block-padding) !important;

			> .urlbarView-row-inner {
				margin-inline-end: 0 !important;
			}

			> .urlbarView-button:not(:empty):not(.urlbarView-button-menu) {
				background-color: var(--color-accent-primary) !important;
				color: var(--button-text-color-primary) !important;
				padding-block: var(--space-xsmall) !important;
				outline: none !important;
				border-radius: var(--border-radius-small) !important;
			}
		}

		&[rich-suggestion][type=search] {
			:root:not([uidensity=compact]) & {
				min-height: calc(var(--size-item-medium) - 2 * var(--urlbarView-row-gutter) + var(--toolbarbutton-inner-padding)) !important;
			}
		}

		.urlbarView-favicon {
			margin-inline-end: calc(var(--urlbarView-icon-margin-end) - var(--urlbarView-favicon-margin-start) - 1px) !important;
		}

		&[rich-suggestion] > .urlbarView-row-inner > .urlbarView-favicon {
			width: calc(var(--size-item-medium) - var(--urlbarView-row-gutter)) !important;
			height: calc(var(--size-item-medium) - var(--urlbarView-row-gutter)) !important;
		}

		&[dynamicType=onboardTabToSearch] > .urlbarView-row-inner {
			min-height: fit-content !important;

			> .urlbarView-no-wrap > .urlbarView-favicon {
				height: var(--size-item-small) !important;
				min-width: var(--size-item-small) !important;

				.urlbarView-row:hover & {
					color: var(--urlbarView-highlight-color) !important;
				}
			}
		}

		&[has-action]:is([type=switchtab], [type=remotetab], [type=clipboard]) > .urlbarView-row-inner > .urlbarView-no-wrap > .urlbarView-action {
			padding: 0 var(--space-small) !important;
			border: none !important;
			background-image: none !important;
			background-color: var(--in-content-button-background) !important;

			&.urlbarView-userContext {
				background-color: color-mix(in srgb, var(--identity-tab-color) 25%, transparent) !important;
			}

			.urlbarView-row:is(:hover, [selected]) & {
				background-color: transparent !important;
			}
		}

		> .urlbarView-button:not(.urlbarView-row[type=tip] > .urlbarView-button) {
			background-color: transparent !important;
			min-width: var(--size-item-small) !important;
			min-height: var(--size-item-small) !important;

			.urlbarView-row:is([row-selectable]:hover, [selected]) > &:not(:hover, [open]) {
				color: var(--color-blue-05) !important;
			}

			&:is(:hover, [open]) {
				color: revert !important;
			}
		}
	}

	[label]::before {
		color: MenuText !important;
	}

	.urlbarView-title-separator::before {
		content: "\2013" !important;
	}

	.urlbarView[noresults] > .urlbarView-body-outer > .urlbarView-body-inner > & {
		padding: 0 !important;
	}
}

.search-one-offs {
	padding: var(--urlbar-icon-padding) !important;

	> .search-panel-header {
		min-height: var(--button-min-height) !important;

		> .search-panel-one-offs-header-label {
			padding-inline: var(--space-small) !important;
		}
	}

	.searchbar-engine-one-off-item {
		min-width: var(--button-min-height) !important;
		height: var(--button-min-height) !important;
		margin-inline: var(--urlbar-icon-padding) !important;

		&:is(:not([selected]):hover, [selected]) {
			background-color: var(--neptune-item-active-background) !important;
		}
	}
}

#identity-box:is([pageproxystate="valid"], [pageproxystate="invalid"]) > .identity-box-button,
#urlbar-label-box {
	padding-inline: var(--urlbar-icon-padding) !important;
}

@media not -moz-pref("sidebar.verticalTabs") {
	#identity-permission-box,
	#notification-popup-box,
	#tracking-protection-icon-container {
		margin-inline-start: calc(-12px - 2 * var(--urlbar-icon-padding));
		visibility: collapse;
		opacity: 0;
		transition: .2s ease;

		&:is(.urlbar-input-container:hover &, [open]) {
			margin-inline-start: 0;
			visibility: visible;
			opacity: 1;
		}
	}

	.urlbar-page-action:not(#reader-mode-button[readeractive], #picture-in-picture-button[pipactive], #translations-button[translationsactive]) {
		margin-inline-end: calc(-16px - 2 * var(--urlbar-icon-padding));
		visibility: collapse;
		transition: .2s ease;

		&:is(.urlbar-input-container:hover &, [open]) {
			margin-inline-end: 0;
			visibility: visible;
		}
	}
}

#identity-box {
	margin: 0 !important;
	fill-opacity: 0.6 !important;

	&[pageproxystate="valid"] > .identity-box-button {
		background: none !important;

		&:hover:not([open]) {
			fill-opacity: 0.8;
		}

		&:is(:hover:active, [open]) {
			fill-opacity: 1;
		}
	}
}

#notification-popup-box {
	background: none !important;
	height: auto !important;
	fill-opacity: 0.6 !important;

	> * {
		height: calc(var(--urlbar-min-height) - 2 * var(--urlbar-icon-padding));
	}

	&:hover {
		fill-opacity: 0.8 !important;
	}

	&:is(:hover:active, [open]) {
		fill-opacity: 1 !important;
	}
}

.urlbar-page-action,
.urlbar-revert-button,
.urlbar-go-button,
.search-go-button {
	background: none !important;
	height: auto !important;
	color: var(--neptune-button-field-color) !important;

	&:not([disabled]):hover {
		color: var(--neptune-button-field-hover-color) !important;
	}

	&:not([disabled]):is(:hover:active, [open]) {
		color: revert !important;
	}
}

#urlbar-zoom-button {
	margin-inline: 2px !important;
	padding-block: 2px !important;
}

.sharing-icon,
#identity-icon,
#permissions-granted-icon,
#tracking-protection-icon,
#tracking-protection-icon-box,
#blocked-permissions-container > .blocked-permission-icon,
.urlbarView-action-btn > img,
#searchmode-switcher-icon,
#searchmode-switcher-popup-search-settings-icon,
.urlbar-input-container [id$="close"],
.searchbar-search-icon,
.searchbar-engine-one-off-item > .button-box > .button-icon {
	width: 12px !important;
	height: 12px !important;
}

/*---------- Tabs Bar ----------*/
#tabbrowser-tabs {
	--theme-scrollbutton-display: none;
	border-inline-start: none !important;

	&[movingtab] {
		padding: 0 !important;
		margin: 0 !important;
	}

	&[orient="horizontal"] {
		--tab-min-width: 64px !important;

		.tabbrowser-tab {
			&:not([pinned], tab-group[collapsed] > &) {
				padding-inline: 0 !important;
				margin-inline: calc(var(--toolbar-start-end-padding) / 2) !important;

				&[fadein]:not([selected], [multiselected]) {
					max-width: 150px !important;
				}

				&[selected] {
					flex-grow: 200 !important;
					min-width: 100px !important;
					max-width: 200px !important;
				}

				&[multiselected] {
					max-width: 100px !important;
				}
			}

			&[pinned]{
				padding-inline: calc(var(--toolbar-start-end-padding) / 2) !important;
			}
		}

		> #tabbrowser-arrowscrollbox > #tabbrowser-arrowscrollbox-periphery > #tabs-newtab-button {
			display: inherit !important;
		}
	}

	&[orient="vertical"] {
		grid-gap: unset !important;

		.tabbrowser-tab {
			margin-block-end: calc(3 * var(--tab-block-margin)) !important;
		}

		#tabs-newtab-button, #vertical-tabs-newtab-button {
			margin: auto auto var(--space-xsmall) !important;
			border-radius: var(--border-radius-small) !important;

			> .toolbarbutton-text {
				display: none;
			}

			#tabbrowser-tabs[expanded] & {
				width: inherit !important;
			}
		}

		> #vertical-pinned-tabs-container {
			scrollbar-width: none !important;
			max-height: calc(5 * var(--tabstrip-min-height) + 5 * (3 * var(--tab-block-margin))) !important;
		}
	}

	tab-group {
		#tabbrowser-tabs[orient="horizontal"] & > .tab-group-label-container {
			padding-inline: 0 !important;
			margin-inline: calc(var(--toolbar-start-end-padding) / 2) !important;
		}

		#tabbrowser-tabs[orient="horizontal"] &:not([collapsed]) > .tab-group-label-container {
			margin-inline-end: calc(var(--tab-block-margin) / 2) !important;
		}

		#tabbrowser-tabs[orient="vertical"] & {
			margin-block: 0 !important;
		}

		.tab-group-label {
			background-color: var(--tab-group-color) !important;
			outline: none !important;
			border-radius: var(--border-radius-small) !important;
			line-height: var(--tab-min-height) !important;
			transition: background-color 0.2s ease;

			tab-group[collapsed] > .tab-group-label-container > & {
				background-color: light-dark(
					color-mix(in srgb, var(--tab-group-color) 25%, transparent),
					color-mix(in srgb, var(--tab-group-color) 35%, transparent)) !important;
			}

			tab-group:not([collapsed]) > .tab-group-label-container > & {
				color: var(--tab-group-color-pale) !important;
			}

			#tabbrowser-tabs[orient="horizontal"] & {
				padding-inline: var(--tab-inline-padding) !important;
			}

			#tabbrowser-tabs[orient="vertical"] & {
				padding: 0 var(--space-medium) !important;
				margin-block: auto calc(3 * var(--tab-block-margin)) !important;

				&:first-letter {
					line-height: initial !important;
				}
			}
		}

		.tab-group-line {
			background-color: light-dark(
				color-mix(in srgb, var(--tab-group-color) 15%, transparent),
				color-mix(in srgb, var(--tab-group-color) 25%, transparent)) !important;
			height: var(--tab-min-height) !important;
			margin: 0 !important;
			border-radius: var(--border-radius-small) !important;
			transition: background-color 0.2s ease;

			.tab-background:not(#tabbrowser-tabs[orient="vertical"][expanded] .tab-background, [multiselected]):has(&) {
				background-color: revert !important;
			}

			.tab-background[selected]:has(&) & {
				background-color: light-dark(
					color-mix(in srgb, var(--tab-group-color) 20%, transparent),
					color-mix(in srgb, var(--tab-group-color) 30%, transparent)) !important;
			}

			.tab-background[multiselected]:has(&) & {
				background-color: transparent !important;
			}

			.tabbrowser-tab:hover & {
				background-color: light-dark(
					color-mix(in srgb, var(--tab-group-color) 25%, transparent),
					color-mix(in srgb, var(--tab-group-color) 35%, transparent)) !important;
			}

			#tabbrowser-tabs[orient="vertical"][expanded] & {
				display: none;
			}
		}
	}
}

.tabbrowser-tab {
	--tab-label-mask-size: 0 !important;
	padding-block: 0 !important;

	#tabbrowser-tabs[movingtab] > #tabbrowser-arrowscrollbox > &[fadein] {
		transition: .2s linear !important;
	}

	.tab-background {
		margin-block: 0 !important;
		outline: none !important;
		border-radius: var(--border-radius-small) !important;
		background-color: transparent !important;
		box-shadow: none !important;
		transition: background-color .2s ease;

		&[selected] {
			background-color: var(--neptune-tab-active-background) !important;

			.tabbrowser-tab[usercontextid] &:not([multiselected]) {
				background-color: color-mix(in srgb, var(--identity-tab-color) 25%, transparent) !important;
			}
		}

		&:not([selected], [multiselected]) {
			background-color: var(--neptune-tab-background) !important;

			.tabbrowser-tab[pending] & {
				background-color: var(--neptune-tab-unloaded-background) !important;
			}

			.tabbrowser-tab:hover & {
				background-color: var(--neptune-tab-hover-background) !important;
			}

			#tabbrowser-tabs[orient="vertical"] & {
				background-color: var(--neptune-verticaltab-background) !important;

				.tabbrowser-tab[pinned] & {
					background-color: var(--neptune-verticaltab-pinned-background) !important;
				}

				.tabbrowser-tab:hover & {
					background-color: var(--neptune-verticaltab-hover-background) !important;
				}
			}

			.tabbrowser-tab[usercontextid] & {
				background-color: color-mix(in srgb, var(--identity-tab-color) 15%, transparent) !important;

				#tabbrowser-tabs[orient="vertical"] & {
					background-color: color-mix(in srgb, var(--identity-tab-color) 8%, transparent) !important;
				}
			}

			.tabbrowser-tab[soundplaying]:not(:is(#tabbrowser-tabs[orient="vertical"][expanded],  #tabbrowser-tabs[orient="horizontal"]) .tabbrowser-tab:not([pinned])[soundplaying]) &:not(tab:hover &) {
				background-color: var(--neptune-tab-soundplaying-background) !important;
				animation: var(--tab-sharing-icon-animation) -1s;
			}
		}

		&[multiselected] {
			background-color: var(--neptune-tab-selected-background) !important;
			background-image: linear-gradient(90deg, transparent 0%,
				var(--neptune-item-selection-background) 25%, transparent 50%,
				var(--neptune-item-selection-background) 75%, transparent 100%);
			background-size: 200% 100%;
			animation: downloadProgressSlideX 2s linear infinite;
		}
	}

	.tab-content {
		font-size: 12.5px;

		:root:not([uidensity=compact]) #tabbrowser-tabs[orient="horizontal"] &[pinned] {
			padding-inline: calc(2 * var(--tab-inline-padding)) !important;
		}

		#tabbrowser-tabs[orient="horizontal"] .tabbrowser-tab[pictureinpicture] & {
			font-size: 0.88em;

			> .tab-label-container > .tab-label {
				line-height: calc(var(--tab-min-height) / 2) !important;
			}
		}

		> .tab-label-container {
			height: inherit !important;

			> .tab-label {
				width: 100%;
				overflow: hidden;
				text-overflow: ellipsis;
			}

			> .tab-secondary-label {
				margin-block: 0 !important;
				font-size: 9px !important;
			}
		}

		> .tab-audio-button {
			--button-min-height-small: var(--size-item-medium) !important;
			--button-background-color-ghost-hover: transparent !important;
			--button-background-color-ghost-active: transparent !important;
		}

		> .tab-icon-stack {
			#tabbrowser-tabs[orient="horizontal"] .tab-content > & > .tab-icon-image:not([src], [busy]) {
				display: revert !important;
			}

			tab:hover .tab-content:not(#tabbrowser-tabs[orient="vertical"]:not([expanded]) .tab-content) > &:not([pinned]),
			tab[soundplaying]:hover .tab-content > & > :is(.tab-icon-image, .tab-throbber) {
				display: none;
			}

			> .tab-icon-image {
				fill: var(--toolbarbutton-icon-fill) !important;

				tab:is([label="New Tab"], [label="New Private Tab"]) & {
					content: url("neptune/icons/favicon.svg");
				}

				tab[label="Add-ons Manager"] & {
					content: url("neptune/icons/extension.svg");
				}

				tab[label="Passwords"] & {
					content: url("neptune/icons/login.svg");
				}

				tab[label="About Profiles"] & {
					content: var(--avatar-image-url);
				}
			}

			> .tab-icon-overlay {
				inset: auto !important;

				:is(#tabbrowser-tabs[orient="vertical"]:not([expanded]), [pinned]) &:is([soundplaying], [muted], [activemedia-blocked]) {
					display: none;

					tab:hover & {
						display: revert;
						animation: urlbar-zoom-reset-pulse 250ms ease-in-out;
					}
				}
			}
		}

		> .tab-close-button {
			background-color: var(--neptune-button-field-color) !important;
			fill: Field !important;
			margin-inline-end: calc(var(--tab-icon-end-margin) + 4px) !important;
			border-radius: 2px !important;
			order: -1;
			display: none;

			#tabbrowser-tabs[orient="vertical"]:not([expanded]) & {
				list-style-image: url("neptune/icons/minus.svg") !important;
				background-image: none !important;
				background-color: var(--attention-dot-color) !important;
				padding: var(--toolbarbutton-outer-padding) !important;
				inset: 0 var(--space-xsmall) !important;
				box-shadow: none !important;
				outline: none !important;
				border-radius: 50% !important;

				.tabbrowser-tab[soundplaying] & {
					display: none !important;
				}
			}

			tab:hover &:not([pinned]) {
				display: revert !important;
				animation: tab-hover-preview-fadein 0.3s ease-in-out both;
			}

			&:hover {
				background-color: var(--neptune-button-field-hover-color) !important;

				&:active {
					background-color: currentColor !important;
				}
			}
		}

		.tabbrowser-tab[pending] & {
			color: var(--text-color-disabled);
		}
	}
}

.all-tabs-item {
	&[selected]:not(:hover) {
		font-weight: unset !important;
		background-color: var(--neptune-tab-background);
	}

	> .all-tabs-secondary-button {
		background-color: transparent !important;

		&:hover {
			fill: var(--color-accent-primary-hover) !important;
		}
	}
}

.tab-group-editor-panel {
	--panel-padding: var(--space-small) var(--space-medium) !important;

	.panel-header {
		padding: 0 !important;

		> h1 {
			margin-block: var(--space-xsmall) !important;
		}
	}

	toolbarseparator {
		margin: var(--arrowpanel-menuitem-margin-inline) !important;
	}
}

.tab-preview-text-container {
	padding: var(--space-medium) !important;
	order: 1;
}

.tab-preview-thumbnail-container {
	border: none !important;
}

#scrollbutton-up, #scrollbutton-down {
	display: var(--theme-scrollbutton-display, inherit);
}

/*---------- Sidebar ----------*/
#sidebar {
	box-shadow: none !important;
	border: none !important;
}

#sidebar-header {
	font-size: 1.25em !important;
	border: none !important;

	#sidebar-switcher-target {
		padding-block: 0 !important;
		border-radius: var(--border-radius-xsmall) !important;
	}
}

#viewButton {
	background-color: var(--neptune-item-background) !important;
	border: none !important;
	border-radius: var(--border-radius-xsmall) !important;

	&[open] {
		background-color: var(--neptune-item-active-background) !important;
	}
}

.actions-list {
	--button-min-height: var(--size-item-medium) !important;
	--button-size-icon: var(--size-item-medium) !important;
	--button-border-radius: var(--border-radius-small) !important;
	--button-label-display: none;

	> moz-button:not(.tools-overflow) {
		--button-outer-padding-block: var(--space-xsmall) !important;

		&:first-of-type {
			--button-outer-padding-block-start: var(--space-xsmall) !important;

			@media not -moz-pref("sidebar.verticalTabs") {
				--button-outer-padding-block-start: 0 !important;
			}
		}

		&:last-of-type {
			--button-outer-padding-block-end: var(--space-xsmall) !important;
		}
	}

	&:has(.expanded-button) {
		flex-direction: row !important;
	}
}

.button-background.labelled {
	justify-content: center !important;

	label {
		display: var(--button-label-display, inherit);
	}
}

.sidebar-panel {
	--icon-size-default: 12px !important;
	padding: 0 var(--space-small) !important;

	moz-card {
		border: none !important;
		border-radius: var(--border-radius-small) !important;

		h3 {
			display: none;
		}
	}

	> #manage-settings > a {
		color: FieldText !important;
	}
}

.search-container {
	height: var(--button-min-height) !important;

	.search-icon {
		background-size: 12px !important;
		transform: scaleX(-1);
	}

	.clear-icon {
		background-image: url(resource://content-accessible/searchfield-cancel.svg) !important;
		background-size: 12px !important;
		right: var(--space-xsmall) !important;
		cursor: default !important;
	}
}

#heading-wrapper {
	padding-inline-start: var(--space-xsmall) !important;
	gap: var(--space-xsmall) !important;

	.chevron-icon {
		min-height: var(--button-min-height) !important;
		height: var(--button-min-height) !important;
		background-image: url("chrome://global/skin/icons/arrow-down-12.svg") !important;

		details[open] & {
			background-image: url("chrome://global/skin/icons/arrow-up-12.svg") !important;
		}
	}
}

#moz-card-details > :is(summary, #content) {
	padding: 0 !important;
	cursor: default !important;
}

sidebar-tab-row {
	--button-background-color-ghost-hover: var(--color-accent-primary-hover) !important;
	--button-background-color-ghost-active: var(--color-accent-primary-active) !important;
	--button-text-color-ghost-hover: var(--button-text-color-primary) !important;
	--button-text-color-ghost-active: var(--button-text-color-primary) !important;
	--fxview-text-primary-color: var(--button-text-color-primary) !important;
	height: var(--button-min-height) !important;
	border-radius: var(--border-radius-xsmall) !important;
}

.fxview-tab-row-main {
	background: none !important;
	padding-block: 0 !important;
	cursor: default !important;
}

.fxview-tab-row-button {
	--button-size-icon: var(--size-item-small) !important;
	--button-min-height: var(--button-min-height) !important;
	--button-outer-padding-block: var(--space-xsmall) !important;
	--button-outer-padding-inline: var(--space-xsmall) !important;
}

@layer input-common {
	#input {
		--input-width: 14px !important;
		--input-height: 14px !important;
		--input-margin-block-adjust: calc((1lh - var(--input-height)) / 2) !important;
	}

	.icon {
		display: none;

		+ .text {
			margin-inline-start: 0 !important;
		}
	}

	.nested {
		margin-inline: 0 !important;
	}
}

moz-radio, moz-checkbox:not(:last-of-type) {
	padding-block: var(--space-small) !important;
	border-color: var(--neptune-content-border-color) !important;
}

treechildren::-moz-tree-row,
treecol:not([hideheader="true"]),
.tree-columnpicker-button {
	min-height: var(--button-min-height) !important;
}

treechildren::-moz-tree-row(selected) {
	background-color: var(--theme-primary-active-color) !important;
}

treechildren::-moz-tree-image(selected),
treechildren::-moz-tree-twisty(selected),
treechildren::-moz-tree-cell-text(selected) {
	color: var(--button-text-color-primary) !important;
}

#header {
	--icon-size-default: 12px !important;
	padding-inline: 0 !important;

	> select {
		margin: 0 !important;
	}
}

#tabbrowser-tabbox {
	outline: none !important;
	box-shadow: none !important;
}

/*---------- Buttons ----------*/
toolbar .toolbarbutton-1 {
	padding: 0 !important;
	margin-inline: calc(var(--toolbar-start-end-padding) / 2) !important;
	opacity: unset !important;
	transition: opacity var(--inactive-window-transition);

	> .toolbarbutton-icon,
	> .toolbarbutton-text,
	> .toolbarbutton-badge-stack {
		outline: none !important;
		border-radius: var(--border-radius-small) !important;
		box-shadow: none !important;
		transition: background-color .2s ease;
	}

	&:not(#TabsToolbar &):-moz-window-inactive {
		opacity: var(--inactive-titlebar-opacity) !important;
	}

	&[disabled]:not(#reload-button) {
		:root:not([customizing]) & {
			display: none;
		}
	}
}

toolbar .toolbaritem-combined-buttons {
	margin: 0 !important;

	> #zoom-reset-button > .toolbarbutton-text {
		min-width: unset !important;
	}

	> separator {
		display: none;
	}

	.toolbarbutton-badge {
		background-color: var(--color-accent-primary) !important;
		border-radius: 50% !important;
		min-width: 14px !important;
		padding-inline: 0 !important;
		line-height: 14px !important;
		font-weight: normal !important;

		toolbarbutton:is(:active, [open]) & {
			display: none;
		}
	}
}

screenshots-buttons {
	top: 0 !important;
	background-color: var(--neptune-popover-background) !important;
	padding: var(--space-medium) !important;
	border-radius: 0 0 var(--arrowpanel-border-radius) var(--arrowpanel-border-radius) !important;
}

#full-page,
#visible-page {
	background-size: 32px 32px !important;
	padding: 28px 0 14px !important;
	font-size: smaller !important;
}

input[type=checkbox],
.checkbox-check:not([native]) {
	appearance: none !important;
	width: 14px !important;
	height: 14px !important;
	border: var(--neptune-checkbox-border);
	border-radius: var(--border-radius-xsmall);
	box-shadow: var(--neptune-checkbox-shadow);

	&:is(:checked, [checked="true"]) {
		background-color: var(--theme-primary-color) !important;
		background-image: url("neptune/icons/check.svg");
		border: none;
	}
}

input[type=radio] {
	appearance: none !important;
	width: 14px !important;
	height: 14px !important;
	border: var(--neptune-checkbox-border);
	border-radius: 50%;
	box-shadow: var(--neptune-checkbox-shadow);

	&:checked {
		background-color: var(--theme-primary-color) !important;
		background-image: url("neptune/icons/radio.svg");
		border: none;
	}
}

.toggle-button {
	--toggle-dot-background-color: var(--neptune-slider-color) !important;
	--toggle-dot-background-color-on-pressed: var(--neptune-slider-color) !important;
	--toggle-border-color: var(--neptune-toolbar-border-color) !important;
}

/*---------- Popups ----------*/
menupopup, panel {
	--panel-padding-block: var(--panel-subview-body-padding-block) !important;
	--panel-separator-color: var(--neptune-popover-separator-color) !important;

	@media (-moz-platform: windows) and (not (-moz-windows-mica-popups)) {
		--panel-background: var(--arrowpanel-background) !important;
		--panel-border-color: var(--neptune-toolbar-border-color) !important;
		--panel-border-radius: var(--arrowpanel-border-radius) !important;
		--panel-shadow-margin: var(--arrowpanel-shadow-margin) !important;
		--panel-shadow: var(--neptune-panel-shadow), 0 3px var(--panel-shadow-margin) var(--neptune-panel-shadow-color) !important;
	}
}

panel:not(.autoscroller, #feature-callout, #confirmation-hint) {
	--arrowpanel-header-back-icon-padding: var(--space-xsmall) !important;
	--arrowpanel-header-back-icon-full-width: calc(12px + 2 * var(--arrowpanel-header-back-icon-padding)) !important;
	--arrowpanel-header-min-height: calc(var(--arrowpanel-header-back-icon-full-width) + 2 * var(--panel-separator-margin-vertical)) !important;

	:root[lwtheme] & {
		color-scheme: light dark !important;
	}

	@media (-moz-platform: macos) or (-moz-platform: windows) {
		appearance: auto !important;
		-moz-default-appearance: menupopup !important;
		--panel-background: Menu !important;
	}

	@media (-moz-platform: windows) and (-moz-windows-mica-popups) {
		--panel-background: var(--neptune-popover-background) !important;
	}

	&[type="arrow"] {
		--popup-width: var(--menu-panel-width-wide) !important;

		#full-page-translations-panel-error {
			border: none !important;
		}
	}

	select:where(:not([size], [multiple])) {
		margin: 0 !important;
	}

	menulist {
		padding-block: 2px !important;
	}

	toolbarseparator {
		margin-inline: calc(var(--arrowpanel-menuitem-margin-inline) + var(--arrowpanel-menuitem-padding-inline)) !important;
	}

	&[type="autocomplete-richlistbox"] {
		--panel-background: var(--arrowpanel-background) !important;

		> .autocomplete-richlistbox {
			background-color: var(--arrowpanel-background) !important;

			> .autocomplete-richlistitem {
				&:not([disabled="true"]):not([selected]):hover {
					background-color: var(--color-accent-primary-hover) !important;
					color: var(--button-text-color-primary) !important;
				}

				&[selected] {
					background-color: var(--color-accent-primary-active) !important;
					color: var(--button-text-color-primary) !important;
				}

				> .ac-type-icon {
					min-height: 12px !important;
					min-width: 12px !important;
				}

				> .ac-title {
					margin-inline: auto !important;
				}
			}
		}

		> menuseparator::before {
			display: none !important;
		}
	}

	.toolbarbutton-badge {
		background-color: var(--icon-color-warning) !important;
		line-height: 14px !important;
		border-radius: 50% !important;
	}
}

panelview .toolbarbutton-1,
toolbarbutton.subviewbutton:not(.all-tabs-secondary-button, .subviewbutton-back, #appMenu-zoom-controls > *),
.widget-overflow-list .toolbarbutton-1,
.toolbaritem-combined-buttons:is(:not([cui-areatype="toolbar"]), [overflowedItem=true]) > toolbarbutton:not(#appMenu-zoom-controls > *) {

	&:not([disabled]):hover {
		background-color: var(--color-accent-primary-hover) !important;
		color: var(--button-text-color-primary) !important;

		&:active {
			background-color: var(--color-accent-primary-active) !important;
		}
	}
}

@media not (-moz-platform: macos) {
	menupopup {
		--content-select-background-image: none !important;

		> menu,
		> menuitem {
			padding-block: 2px !important;
			border-radius: var(--arrowpanel-menuitem-border-radius) !important;
			padding-inline-start: var(--arrowpanel-menuitem-padding-inline) !important;

			> .menu-right {
				margin-inline-end: var(--arrowpanel-menuitem-padding-inline) !important;
			}

			menupopup[needsgutter] &:not([checked="true"], [icon], .menu-iconic, .menuitem-iconic) {
				padding-inline-start: var(--space-xlarge) !important;
			}

			&:where([_moz-menuactive]:not([disabled="true"])) {
				background-color: var(--color-accent-primary-hover) !important;
				color: var(--button-text-color-primary) !important;
			}

			&:where([_moz-menuactive="true"][disabled="true"]) {
				background: none !important;
			}
		}

		> menuitem[checked="true"] {
			padding-inline-start: 0 !important;

			:is(#backForwardMenu, #nav-bar-customization-target) & {
				padding-inline-start: var(--space-medium) !important;
			}

			> .menu-iconic-left {
				margin-inline-end: var(--space-xsmall) !important;
			}
		}

		> #context-navigation {
			 > menuitem:where([_moz-menuactive]:not([disabled="true"])) {
				background: none !important;
				color: var(--color-accent-primary-hover) !important;
			}

			> .menuitem-iconic > .menu-iconic-left > .menu-iconic-icon {
				padding-block: var(--space-xsmall) !important;
			}
		}

		> menuseparator {
			padding: var(--panel-separator-margin) !important;
		}

		#ContentSelectDropdown > & > .ContentSelectDropdown-item-0 {
			font-size: 1rem !important;

			&:not([_moz-menuactive="true"]) {
				background-color: transparent !important;
				color: menutext !important;
			}
		}

		#ContentSelectDropdown > & > :is(menucaption, menuitem) > .menu-iconic-text {
			padding-block: 1px !important;
		}
	}
}

#confirmation-hint {
	--arrowpanel-background: var(--theme-primary-color) !important;
	--arrowpanel-border-color: transparent !important;

	#confirmation-hint-checkmark-animation-container[animate] > #confirmation-hint-checkmark-image {
		fill: var(--button-text-color-primary) !important;
	}

	#confirmation-hint-message {
		color: var(--button-text-color-primary);
	}
}

#feature-callout {
	--arrow-offset: 0 !important;
	--arrowpanel-background: Menu !important;
	--panel-shadow-margin: var(--arrowpanel-shadow-margin) !important;

	.screen[pos=callout] .action-buttons :is(.primary, .secondary) {
		min-height: var(--button-min-height) !important;
	}
}

#sidebar-switcher-target > #sidebar-icon,
.identity-popup-security-connection-icon,
.subviewbutton-iconic:not(.all-tabs-button.subviewbutton-iconic) > .toolbarbutton-icon,
.permission-popup-permission-icon,
.downloadButton > .button-box > .button-icon,
.menu-iconic-icon:not(:is(#context-navigation, .bookmark-item) .menu-iconic-icon),
.menu-right > image,
.pointerlockfswarning::before,
:is(#protections-popup-mainView, .widget-overflow-list, .PanelUI-subView) .subviewbutton-nav::after {
	width: 12px !important;
	height: 12px !important;
}

#appMenu-popup {
	#appMenu-fxa-status2:not([fxastatus]) > #appMenu-fxa-label2 {
		padding-block: 0 !important;
	}

	#fxa-menu-header-title {
		color: inherit !important;
	}

	.subviewbutton > :is(.toolbarbutton-icon, .toolbarbutton-text) {
		margin-block: auto !important;
	}

	.PanelUI-remotetabs-clientcontainer > label[itemtype="client"] {
		margin: 0 calc(var(--arrowpanel-menuitem-margin-inline) + var(--arrowpanel-menuitem-padding-inline)) var(--space-xsmall) !important;
	}
}

#protections-popup #protections-popup-show-report-stack {
	&:hover {
		> .protections-popup-footer-button {
			background-color: var(--color-accent-primary-hover) !important;
			color: var(--button-text-color-primary) !important;
		}

		#protections-popup-trackers-blocked-counter-description {
			color: var(--button-text-color-primary) !important;
		}
	}

	&:hover:active > .protections-popup-footer-button {
		background-color: var(--color-accent-primary-active) !important;
	}
}

.permission-popup-section {
	padding-bottom: var(--panel-subview-body-padding-block) !important;

	.permission-popup-permission-item {
		min-height: var(--button-min-height) !important;
		margin-block: 0 !important;

		> :is(#permission-popup-menulist, .permission-popup-permission-remove-button) {
			padding-block: 0 !important;
		}

		.permission-popup-permission-state-label {
			margin-block: 0 !important;
		}
	}
}

.toolbar-menupopup :is(menu, menuitem),
.subview-subheader,
panelview .toolbarbutton-1,
.subviewbutton,
.widget-overflow-list .toolbarbutton-1 {
	min-height: var(--button-min-height) !important;
}

.footer-button {
	height: var(--button-min-height) !important;
	min-height: var(--button-min-height) !important;
	padding-block: 0 !important;
}

.expander-up,
.expander-down {
	min-height: var(--button-min-height) !important;
	border: none !important;
	border-radius: var(--border-radius-small) !important;
}

#editBookmarkPanelContent {
	padding-block: var(--panel-subview-body-padding-block) !important;

	#editBMPanel_folderTree {
		background-color: var(--neptune-input-bgcolor) !important;
		border: none !important;
	}

	#editBMPanel_newFolderButton {
		padding-block: var(--space-xsmall) !important;
	}
}

#downloadsPanel-mainView {
	min-width: calc(var(--menu-panel-width-wide) + var(--size-item-large)) !important;
	padding-block: var(--panel-subview-body-padding-block) !important;

	#downloadsListBox {
		width: var(--menu-panel-width-wide) !important;

		> richlistitem {
			background: none !important;
			color: inherit !important;
			margin: 0 !important;
			border-radius: 0 !important;

			&:not(:first-child) {
				border-top: 1px solid var(--neptune-popover-separator-color);
			}

			> .downloadMainArea {
				padding-block: var(--panel-subview-body-padding-block) !important;

				> .downloadTypeIcon {
					width: 28px !important;
					height: 28px !important;
				}
			}
		}

		.downloadButton {
			min-width: 20px !important;
			height: 20px !important;
			border: none !important;
			border-radius: 50% !important;
		}

		.downloadProgress {
			height: 3px !important;
			margin-inline: 0 !important;
		}
	}

	#emptyDownloads {
		padding-block: var(--space-xlarge) !important;
	}
}

#statuspanel-label {
	background-color: var(--neptune-content-background) !important;
	border: none !important;
}

@-moz-document url("chrome://browser/content/places/places.xhtml") {
	treecol, .tree-columnpicker-button {
		background-color: var(--neptune-item-background) !important;

		&:where(:hover) {
			background-color: var(--neptune-item-hover-background) !important;
		}

		&:where(:hover:active) {
			background-color: var(--neptune-item-active-background) !important;
		}
	}

	#placesToolbar > toolbarbutton {
		margin-inline: var(--space-small) !important;
	}

	richlistbox {
		border: none !important;
	}

	#downloadsListBox {
		> richlistitem[selected="true"] {
			background-image: none !important;
			background-color: var(--color-accent-primary-active) !important;
			color: var(--button-text-color-primary) !important;
			border-radius: 0 !important;
			outline: none !important;
		}

		.downloadButton > .button-box {
			border-radius: 50% !important;
		}
	}
}

.pointerlockfswarning {
	background-color: var(--neptune-popover-background) !important;
	padding: var(--space-medium) !important;
	border: none !important;
	box-shadow: none !important;

	> #fullscreen-exit-button {
		appearance: none !important;
		background-color: var(--neptune-content-background) !important;
		border: none !important;
		border-radius: var(--toolbarbutton-border-radius) !important;
	}

	> .pointerlockfswarning-domain-text {
		font-size: 1.25em !important;
		margin-inline: var(--space-small) !important;
	}
}

/*---------- Dialogs ----------*/
#window-modal-dialog {
	--chrome-offset: 15vh !important;
}

#titleContainer {
	margin-inline: auto !important;
}

.dialogOverlay[topmost="true"],
#window-modal-dialog::backdrop {
	background: none !important;
}

.onboardingContainer {
	.screen[pos="center"] {
		background-color: transparent !important;
	}

	.main-content {
		border-radius: var(--border-radius-large) !important;
		box-shadow: var(--neptune-small-shadow), var(--neptune-menu-shadow) !important;
	}

	:is(.primary, .secondary, .additional-cta, .submenu-button) {
		padding-block: 2px !important;
		border-radius: var(--border-radius-small) !important;
	}
}

.dialogBox {
	border-radius: var(--border-radius-large) !important;
	box-shadow: var(--neptune-small-shadow), var(--neptune-menu-shadow) !important;
}

.dialog-button-box button {
	height: var(--button-min-height) !important;
	min-height: var(--button-min-height) !important;
	border-radius: var(--border-radius-small) !important;
}

.toolbarButton,
.toolbarCenter {
	min-height: var(--button-min-height) !important;
}

#cancel-button,
#print-button.primary {
	min-height: var(--button-min-height) !important;
	padding: 0 !important;
	border-radius: var(--border-radius-small) !important;
}

@-moz-document url("chrome://browser/content/aboutDialog.xhtml") {
	#bottomBox,
	#aboutDialogContainer {
		background-color: #383838 !important;
	}

	#leftBox {
		background-size: 12em !important;
		margin: 0 !important;
	}

	.text-link {
		color: var(--link-color) !important;
	}
}

/*-------- Titlebar buttons --------*/
@media (-moz-platform: macos) {
	.titlebar-buttonbox-container {
		position: absolute;
		inset: calc(var(--theme-browser-toolbox-padding) + (var(--urlbar-min-height) - 16px) / 2) auto auto 7px;
	}
}

@media (-moz-platform: windows) {
	.titlebar-buttonbox-container {
		position: absolute;
		inset: calc(var(--theme-browser-toolbox-padding) + (var(--urlbar-min-height) - 12px) / 2) auto auto 16px;

		:root[inFullscreen] & {
			display: none;
		}
	}

	.titlebar-button {
		padding: 0 !important;
		margin-inline: 4px !important;
		background: none !important;
	}

	.titlebar-close {
		order: -1;
		list-style-image: url("neptune/titlebuttons/titlebutton-close.svg") !important;

		.titlebar-buttonbox:hover & {
			list-style-image: url("neptune/titlebuttons/titlebutton-close-hover.svg") !important;

			&:active {
				list-style-image: url("neptune/titlebuttons/titlebutton-close-active.svg") !important;

				@media (prefers-color-scheme: dark) {
					list-style-image: url("neptune/titlebuttons/titlebutton-close-active-dark.svg") !important;
				}
			}
		}
	}

	.titlebar-min {
		list-style-image: url("neptune/titlebuttons/titlebutton-minimize.svg") !important;

		.titlebar-buttonbox:hover & {
			list-style-image: url("neptune/titlebuttons/titlebutton-minimize-hover.svg") !important;

			&:active {
				list-style-image: url("neptune/titlebuttons/titlebutton-minimize-active.svg") !important;

				@media (prefers-color-scheme: dark) {
					list-style-image: url("neptune/titlebuttons/titlebutton-minimize-active-dark.svg") !important;
				}
			}
		}
	}

	.titlebar-max {
		list-style-image: url("neptune/titlebuttons/titlebutton-maximize.svg") !important;

		.titlebar-buttonbox:hover & {
			list-style-image: url("neptune/titlebuttons/titlebutton-maximize-hover.svg") !important;

			&:active {
				list-style-image: url("neptune/titlebuttons/titlebutton-maximize-active.svg") !important;

				@media (prefers-color-scheme: dark) {
					list-style-image: url("neptune/titlebuttons/titlebutton-maximize-active-dark.svg") !important;
				}
			}
		}
	}

	.titlebar-restore {
		list-style-image: url("neptune/titlebuttons/titlebutton-maximize.svg") !important;

		.titlebar-buttonbox:hover & {
			list-style-image: url("neptune/titlebuttons/titlebutton-unmaximize-hover.svg") !important;

			&:active {
				list-style-image: url("neptune/titlebuttons/titlebutton-unmaximize-active.svg") !important;

				@media (prefers-color-scheme: dark) {
					list-style-image: url("neptune/titlebuttons/titlebutton-unmaximize-active-dark.svg") !important;
				}
			}
		}
	}

	.titlebar-button:-moz-window-inactive {
		list-style-image: url("neptune/titlebuttons/titlebutton-backdrop.svg") !important;

		@media (prefers-color-scheme: dark) {
			list-style-image: url("neptune/titlebuttons/titlebutton-backdrop-dark.svg") !important;
		}
	}
}

/*---------- Icons ----------*/
#PanelUI-menu-button {
	list-style-image: url("neptune/icons/menu.svg") !important;

	&:is([badge-status="update-available"], [badge-status="update-downloading"], [badge-status="update-manual"], [badge-status="update-restart"], [badge-status="update-unsupported"], [badge-status="addon-alert"], [badge-status="fxa-needs-authentication"]) {
		list-style-image: url("neptune/icons/menu-badged.svg") !important;
	}

	@media not -moz-pref("sidebar.verticalTabs") {
		position: fixed;
		inset-inline-end: calc(var(--toolbar-start-end-padding) + var(--toolbarbutton-outer-padding) - var(--toolbar-start-end-padding) / 2);

		@media (width <= 728px) {
			position: revert;
		}
	}

	@media -moz-pref("sidebar.verticalTabs") {
		margin-inline-end: calc(var(--toolbar-start-end-padding) + var(--toolbarbutton-outer-padding)) !important;
	}
}

#tabs-newtab-button, #new-tab-button {
	list-style-image: url("neptune/icons/plus.svg") !important;

	@media not -moz-pref("sidebar.verticalTabs") {
		position: absolute;
		inset-inline-end: calc(var(--tab-min-height) + 2 * var(--toolbar-start-end-padding) + var(--toolbarbutton-outer-padding) - var(--toolbar-start-end-padding) / 2);

		@media (width <= 728px) {
			position: revert;
		}
	}
}

#unified-extensions-button {
	list-style-image: url("neptune/icons/extension.svg") !important;

	@media not -moz-pref("sidebar.verticalTabs") {
		position: fixed;
		inset-inline-end: calc(2 * var(--tab-min-height) + 3 * var(--toolbar-start-end-padding) + var(--toolbarbutton-outer-padding) - var(--toolbar-start-end-padding) / 2);

		:root[customizing] & {
			display: none;
		}

		@media (width <= 728px) {
			position: revert;
		}
	}
}

#sidebar-button {
	list-style-image: url("neptune/icons/sidebars-right.svg") !important;

	&:-moz-locale-dir(ltr):not([positionend]),
	&:-moz-locale-dir(rtl)[positionend] {
		list-style-image: url("neptune/icons/sidebars.svg") !important;
	}

	@media -moz-pref("sidebar.revamp") {
		list-style-image: url("neptune/icons/sidebar-collapsed-right.svg") !important;

		&[expanded] {
			list-style-image: url("neptune/icons/sidebars-right.svg") !important;
		}

		&:-moz-locale-dir(ltr):not([positionend]),
		&:-moz-locale-dir(rtl)[positionend] {
			list-style-image: url("neptune/icons/sidebar-collapsed.svg") !important;

			&[expanded] {
				list-style-image: url("neptune/icons/sidebars.svg") !important;
			}
		}
	}
}

#back-button, .unified-nav-back[_moz-menuactive] {
	list-style-image: url("neptune/icons/back.svg") !important;
}

#forward-button, .unified-nav-forward[_moz-menuactive] {
	list-style-image: url("neptune/icons/forward.svg") !important;
}

#reload-button, .downloadIconRetry .button-icon {
	list-style-image: url("neptune/icons/reload.svg") !important;
}

#stop-button {
	list-style-image: url("neptune/icons/stop.svg") !important;
}

#firefox-view-button {
	list-style-image: url("neptune/icons/firefox-view.svg") !important;
}

#alltabs-button {
	list-style-image: url("neptune/icons/view-opentabs.svg") !important;
}

#logins-button {
	list-style-image: url("neptune/icons/login.svg") !important;
}

#permissions-granted-icon {
	list-style-image: url("neptune/icons/permissions.svg") !important;
}

#tracking-protection-icon-box {
	list-style-image: url("neptune/icons/tracking-protection.svg") !important;

	&[active] {
		list-style-image: url("neptune/icons/tracking-protection-active.svg") !important;
	}

	&[hasException] {
		list-style-image: url("neptune/icons/tracking-protection-disabled.svg") !important;
	}
}

#identity-box[pageproxystate="valid"]:is(.verifiedDomain, .mixedActiveBlocked) #identity-icon,
#identity-popup[connection^=secure] .identity-popup-security-connection {
	list-style-image: url("neptune/icons/security.svg") !important;
}

#identity-box[pageproxystate="valid"]:is(.weakCipher, .mixedDisplayContent, .mixedDisplayContentLoadedActiveBlocked, .certUserOverridden, .certErrorPage) #identity-icon,
#identity-popup:is([ciphers=weak], [mixedcontent~=passive-loaded][isbroken], [connection=secure-cert-user-overridden], [connection=cert-error-page]) .identity-popup-security-connection {
	list-style-image: url("neptune/icons/security-warning.svg") !important;
}

#identity-box[pageproxystate="valid"]:is(.notSecure, .mixedActiveContent, .httpsOnlyErrorPage) #identity-icon,
.identity-popup-security-connection:not(#identity-popup[connection=chrome], [connection="file"] .identity-popup-security-connection) {
	list-style-image: url("neptune/icons/security-broken.svg") !important;
}

#identity-box[pageproxystate="valid"].localResource #identity-icon {
	list-style-image: url(chrome://global/skin/icons/defaultFavicon.svg) !important;
}

#identity-box[pageproxystate="valid"].chromeUI #identity-icon {
	list-style-image: url("neptune/icons/firefox.svg") !important;
}

.close-icon:not(.findbar-closebutton),
.permission-popup-permission-remove-button > .button-box>.button-icon {
	height: 12px !important;
	width: 12px !important;
	padding: 0 !important;
	list-style-image: url("neptune/icons/close-12.svg") !important;
}

.expander-up {
	list-style-image: url("chrome://global/skin/icons/arrow-up-12.svg") !important;
}

.expander-down {
	list-style-image: url("chrome://global/skin/icons/arrow-down-12.svg") !important;
}

#downloads-indicator-anchor {
	list-style-image: url("neptune/icons/downloads.svg") !important;
}

.downloadIconShow .button-icon {
	list-style-image: url("chrome://global/skin/icons/search-glass.svg") !important;
}

#reader-mode-button > .urlbar-icon {
	list-style-image: url("neptune/icons/reader-mode.svg") !important;
}

#picture-in-picture-button > .urlbar-icon {
	list-style-image: url("neptune/icons/picture-in-picture-open.svg") !important;
}

#picture-in-picture-button[pipactive] > .urlbar-icon {
	list-style-image: url("neptune/icons/picture-in-picture-closed.svg") !important;
}

#pageAction-panel-bookmark,
#star-button {
	list-style-image: url("neptune/icons/bookmark-hollow.svg") !important;

	&[starred] {
		list-style-image: url("neptune/icons/bookmark.svg") !important;
	}
}

/*---------- Hidden ----------*/
tooltip,
.control-item::after, #fullscreen,
#nav-bar-overflow-button,
#identity-icon-label,
#blocked-permissions-container,
.private-browsing-indicator-with-label,
.urlbar-go-button,
.urlbarView-type-icon,
.unified-extensions-item-menu-button.subviewbutton,
#downloadsFooter,
#statuspanel:not([type=overLink]),
.findbar-container > checkbox,
.unified-extensions-item-message,
#placesContext_open\:newwindow,
#context-navigation > .menuitem-iconic,
#context-sep-navigation,
#context-sep-sharing,
#context-openlink,
menuitem.share-tab-url-item,
menuitem[id^="context"]:is([id*="bookmark"], [id*="duplicate"], [id*="Duplicate"], [id*="Background"]):not(.menuitem-iconic),
#toolbar-context-menu > *:not(.viewCustomizeToolbar, .customize-context-pinToToolbar, [id*="vertical-tabs"], [id*="remove"]:not([disabled="true"]), [id*="download"]),
#scrollbutton-up ~ spacer,
#tabbrowser-tabs .tab-context-line,
#vertical-pinned-tabs-container-separator,
#tabbrowser-tabs[orient="vertical"][overflow]::after,
tab-group::before,
.tab-group-label-container::after,
.titlebar-spacer,
#searchmode-switcher-dropmarker,
#urlbar .search-one-offs {
	display: none !important;
}
